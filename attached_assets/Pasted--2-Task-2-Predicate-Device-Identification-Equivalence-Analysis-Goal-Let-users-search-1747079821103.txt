### 2ï¸âƒ£ Task 2: Predicate Device Identification & Equivalence Analysis

**Goal:** Let users search for FDAâ€registered predicate devices, compare key attributes, and draft a Substantial Equivalence analysis section.

---

#### A. Predicate Device Search

1. **Frontâ€End Component**

   * **Path:** `client/src/components/510k/PredicateSearch.jsx`
   * **Features:**

     * Search box for â€œPredicate Device Name or 510(k) Numberâ€
     * Autoâ€suggest powered by the FDA 510(k) database API
     * Display list of matches (Name, Kâ€Number, Decision Date, Product Code)
     * â€œSelect as Predicateâ€ button

2. **API Integration**

   * **Endpoint:** `GET /api/510k/predicates?q=<query>`
   * **Implementation:**

     * Query FDAâ€™s open 510(k) API (e.g. [https://api.fda.gov/device/510k.json](https://api.fda.gov/device/510k.json))
     * Map results to `{ predicateId, kNumber, deviceName, decisionDate, productCode }`

---

#### B. Equivalence Comparison Table

1. **Component**

   * **Path:** `client/src/components/510k/EquivalenceTable.jsx`
   * **Features:**

     * Sideâ€byâ€side table: â€œYour Deviceâ€ vs. â€œPredicateâ€
     * Key fields: Intended Use, Technology, Materials, Performance Specs
     * Inline edit for any attribute differences
     * Realâ€time flagging of major deviations

2. **Data Flow**

   * After selecting predicate, fetch its full record via:

     ```
     GET /api/510k/predicates/:predicateId
     ```
   * Populate the table and allow user edits.

---

#### C. Automated Substantial Equivalence Draft

1. **â€œDraft SE Sectionâ€ Button**

   * Triggers server-side AI prompt blending your device profile + predicate data

2. **Server Endpoint**

   * **POST** `/api/510k/draft-equivalence`
   * **Payload:**

     ```json
     {
       "deviceProfile": { â€¦ },
       "predicateProfile": { â€¦ }
     }
     ```
   * **Response:**

     ```json
     { "draftText": "Your AI-generated substantial equivalence narrativeâ€¦" }
     ```

3. **UI Rendering**

   * Show draft in a rich-text editor (e.g. Slate or Quill)
   * Allow user to refine, then â€œAccept & Add to 510(k) Reportâ€

---

ğŸ”œ **Next Steps:**

* Wire up `PredicateSearch` to FDA API and test autocomplete.
* Build `EquivalenceTable` UI with Prop-drilling or Context for data.
* Implement `/draft-equivalence` using your AI service (OpenAI, Ollama, etc.).
* Add â€œAdd to Reportâ€ integration so the Section Generator in the CER2V UI can include the SE narrative.
