<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>IND Wizard™ | TrialSage</title>
    <meta name="description" content="TrialSage's IND Wizard™ module streamlines IND applications with guided questionnaires, AI-driven document generation, and automated submission packages to accelerate approvals.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://img.freepik.com/premium-vector/green-health-logo_7888-106.jpg">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/landing-assets/premium-styles.css">
    
    <style>
        :root {
            --primary: #0ea5e9;
            --primary-dark: #0284c7;
            --primary-light: #38bdf8;
            --secondary: #0f172a;
            --secondary-light: #1e293b;
            --accent: #22c55e;
            --accent-dark: #16a34a;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --danger: #ef4444;
            --success: #22c55e;
            --warning: #eab308;
            --info: #3b82f6;
            --border-radius: 0.5rem;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            color: var(--gray-800);
            line-height: 1.5;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background-color: #fff;
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
            padding-left: env(safe-area-inset-left);
            padding-right: env(safe-area-inset-right);
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        a {
            color: var(--primary);
            text-decoration: none;
            transition: color 0.2s ease;
        }
        
        a:hover {
            color: var(--primary-dark);
        }
        
        .container {
            width: 100%;
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }
        
        .row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -1rem;
        }
        
        .col {
            flex: 1 0 0%;
            padding: 0 1rem;
        }
        
        /* For specific column sizes */
        .col-12 { flex: 0 0 100%; max-width: 100%; }
        .col-11 { flex: 0 0 91.6667%; max-width: 91.6667%; }
        .col-10 { flex: 0 0 83.3333%; max-width: 83.3333%; }
        .col-9 { flex: 0 0 75%; max-width: 75%; }
        .col-8 { flex: 0 0 66.6667%; max-width: 66.6667%; }
        .col-7 { flex: 0 0 58.3333%; max-width: 58.3333%; }
        .col-6 { flex: 0 0 50%; max-width: 50%; }
        .col-5 { flex: 0 0 41.6667%; max-width: 41.6667%; }
        .col-4 { flex: 0 0 33.3333%; max-width: 33.3333%; }
        .col-3 { flex: 0 0 25%; max-width: 25%; }
        .col-2 { flex: 0 0 16.6667%; max-width: 16.6667%; }
        .col-1 { flex: 0 0 8.3333%; max-width: 8.3333%; }
        
        header {
            background-color: white;
            box-shadow: var(--shadow);
            padding: 1rem 0;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }
        
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 1.5rem;
            color: var(--secondary);
        }
        
        .logo img {
            height: 2.5rem;
            margin-right: 0.75rem;
        }
        
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.625rem 1.5rem;
            font-weight: 500;
            font-size: 1rem;
            line-height: 1.5;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            cursor: pointer;
            user-select: none;
            border: 1px solid transparent;
            border-radius: var(--border-radius);
            transition: all 0.2s ease-in-out;
        }
        
        .btn:hover {
            transform: translateY(-1px);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
            color: white;
        }
        
        .hero {
            padding: 10rem 0 5rem;
            background: linear-gradient(45deg, var(--primary-dark), var(--primary));
            color: white;
            text-align: center;
        }
        
        .hero-title {
            font-size: 3rem;
            margin-bottom: 1.5rem;
        }
        
        .hero-description {
            font-size: 1.25rem;
            max-width: 800px;
            margin: 0 auto 2rem;
            opacity: 0.9;
        }
        
        .section {
            padding: 5rem 0;
        }
        
        .section-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .section-description {
            font-size: 1.125rem;
            color: var(--gray-600);
            max-width: 800px;
            margin: 0 auto 3rem;
            text-align: center;
        }
        
        .steps-section {
            background-color: var(--gray-50);
            padding: 6rem 0;
        }
        
        .steps-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .step-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 4rem;
            position: relative;
        }
        
        .step-item:last-child {
            margin-bottom: 0;
        }
        
        .step-number {
            background-color: var(--primary);
            color: white;
            font-weight: 700;
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
            margin-right: 2rem;
            position: relative;
            z-index: 2;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--secondary);
        }
        
        .step-description {
            font-size: 1.125rem;
            color: var(--gray-600);
            margin-bottom: 1.5rem;
        }
        
        .step-features {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }
        
        .step-feature {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
        }
        
        .step-feature-icon {
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .step-feature-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }
        
        .step-feature-description {
            font-size: 0.875rem;
            color: var(--gray-600);
        }
        
        .step-connector {
            position: absolute;
            left: 1.5rem;
            top: 3rem;
            bottom: -4rem;
            width: 2px;
            background-color: var(--primary-light);
            z-index: 1;
        }
        
        .step-item:last-child .step-connector {
            display: none;
        }
        
        .faq-section {
            padding: 6rem 0;
            background-color: white;
        }
        
        .faq-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .faq-item {
            border-bottom: 1px solid var(--gray-200);
            padding: 1.5rem 0;
        }
        
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 1.25rem;
            color: var(--secondary);
            cursor: pointer;
        }
        
        .faq-question i {
            font-size: 1rem;
            transition: transform 0.3s ease;
        }
        
        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }
        
        .faq-answer {
            padding-top: 1rem;
            display: none;
            color: var(--gray-600);
            font-size: 1.125rem;
        }
        
        .faq-item.active .faq-answer {
            display: block;
        }
        
        .cta-section {
            padding: 5rem 0;
            background: linear-gradient(to right, var(--primary-dark), var(--primary));
            color: white;
            text-align: center;
        }
        
        .cta-content {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .cta-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 2rem;
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 1.5rem;
        }
        
        .cta-title {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }
        
        .cta-description {
            font-size: 1.25rem;
            margin-bottom: 2.5rem;
            opacity: 0.9;
        }
        
        .cta-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
        }
        
        .btn-white {
            background-color: white;
            color: var(--primary-dark);
            border-color: white;
        }
        
        .btn-white:hover {
            background-color: rgba(255, 255, 255, 0.9);
            border-color: rgba(255, 255, 255, 0.9);
        }
        
        .btn-outline-white {
            background-color: transparent;
            color: white;
            border-color: white;
        }
        
        .btn-outline-white:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        @media (max-width: 768px) {
            .step-item {
                flex-direction: column;
            }
            
            .step-number {
                margin-right: 0;
                margin-bottom: 1.5rem;
            }
            
            .step-connector {
                display: none;
            }
            
            .step-features {
                grid-template-columns: 1fr;
            }
            
            .hero-title {
                font-size: 2.25rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .cta-title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="navbar">
                <a href="/" class="logo">
                    <img src="https://img.freepik.com/premium-vector/green-health-logo_7888-106.jpg" alt="TrialSage Logo">
                    <span>TrialSage™</span>
                </a>
                <a href="/" class="btn btn-primary">Back to Home</a>
            </div>
        </div>
    </header>
    
    <section class="hero">
        <div class="container">
            <span class="sales-badge">75% Faster IND Submissions</span>
            <h1 class="hero-title">IND Wizard™</h1>
            <p class="hero-description">Transform your Investigational New Drug (IND) application process with our intelligent, guided workflow that helps pharmaceutical teams create compliant, high-quality submissions in a fraction of the time.</p>
            <div class="hero-buttons">
                <a href="/demo" class="btn btn-white">Request Demo</a>
                <a href="#how-it-works" class="btn btn-outline-white">How It Works</a>
            </div>
        </div>
    </section>
    
    <section class="section" id="benefits">
        <div class="container">
            <h2 class="section-title">Why Choose IND Wizard™?</h2>
            <p class="section-description">Our intelligent IND application solution dramatically reduces preparation time while ensuring regulatory compliance and increasing first-time acceptance rates.</p>
            
            <div class="row">
                <div class="col col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h3 class="feature-title">75% Time Savings</h3>
                        <p class="feature-content">Reduce IND preparation time from months to weeks with AI-powered document generation and guided workflows.</p>
                    </div>
                </div>
                
                <div class="col col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h3 class="feature-title">98% First-Time Approval</h3>
                        <p class="feature-content">Achieve industry-leading acceptance rates with built-in compliance validation and real-time FDA requirements checking.</p>
                    </div>
                </div>
                
                <div class="col col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3 class="feature-title">Cross-Functional Collaboration</h3>
                        <p class="feature-content">Enable seamless collaboration between regulatory, clinical, CMC, and nonclinical teams with role-based workflows.</p>
                    </div>
                </div>
                
                <div class="col col-md-6 col-lg-3">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-cogs"></i>
                        </div>
                        <h3 class="feature-title">Intelligent Automation</h3>
                        <p class="feature-content">Automate content generation, cross-references, and document formatting to eliminate manual errors and inconsistencies.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="steps-section" id="how-it-works">
        <div class="container">
            <h2 class="section-title">How IND Wizard™ Works</h2>
            <p class="section-description">Our intelligent platform guides you through every step of the IND preparation process with AI-assisted tools and regulatory expertise.</p>
            
            <div class="steps-container">
                <div class="step-item">
                    <div class="step-number">1</div>
                    <div class="step-connector"></div>
                    <div class="step-content">
                        <h3 class="step-title">Guided Questionnaire</h3>
                        <p class="step-description">Begin with our intelligent questionnaire that collects all essential information about your product, indication, and development program, dynamically adapting based on your responses.</p>
                        <div class="step-features">
                            <div class="step-feature">
                                <div class="step-feature-icon">
                                    <i class="fas fa-question-circle"></i>
                                </div>
                                <h4 class="step-feature-title">Smart Branching Logic</h4>
                                <p class="step-feature-description">Questions adapt based on previous answers to ensure relevance to your specific product type.</p>
                            </div>
                            <div class="step-feature">
                                <div class="step-feature-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <h4 class="step-feature-title">Save & Resume</h4>
                                <p class="step-feature-description">Preserve progress at any point and return later, with automated notifications for outstanding sections.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="step-item">
                    <div class="step-number">2</div>
                    <div class="step-connector"></div>
                    <div class="step-content">
                        <h3 class="step-title">AI-Powered Document Generation</h3>
                        <p class="step-description">Based on your inputs, our advanced AI technology automatically generates compliant, high-quality IND documents following FDA guidelines and best practices.</p>
                        <div class="step-features">
                            <div class="step-feature">
                                <div class="step-feature-icon">
                                    <i class="fas fa-robot"></i>
                                </div>
                                <h4 class="step-feature-title">Content Intelligence</h4>
                                <p class="step-feature-description">AI suggests appropriate content based on your product's mechanism of action, indication, and development stage.</p>
                            </div>
                            <div class="step-feature">
                                <div class="step-feature-icon">
                                    <i class="fas fa-sync"></i>
                                </div>
                                <h4 class="step-feature-title">Dynamic Updates</h4>
                                <p class="step-feature-description">Changes automatically propagate throughout the entire submission to maintain consistency.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="step-item">
                    <div class="step-number">3</div>
                    <div class="step-connector"></div>
                    <div class="step-content">
                        <h3 class="step-title">Regulatory Validation</h3>
                        <p class="step-description">Our comprehensive validation engine checks your submission for regulatory compliance, completeness, and consistency before finalization.</p>
                        <div class="step-features">
                            <div class="step-feature">
                                <div class="step-feature-icon">
                                    <i class="fas fa-clipboard-check"></i>
                                </div>
                                <h4 class="step-feature-title">Compliance Checking</h4>
                                <p class="step-feature-description">Automatically validates against the latest FDA guidance and requirements.</p>
                            </div>
                            <div class="step-feature">
                                <div class="step-feature-icon">
                                    <i class="fas fa-search"></i>
                                </div>
                                <h4 class="step-feature-title">Gap Analysis</h4>
                                <p class="step-feature-description">Identifies missing elements and provides recommendations for strengthening your submission.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="step-item">
                    <div class="step-number">4</div>
                    <div class="step-content">
                        <h3 class="step-title">Submission Ready Package</h3>
                        <p class="step-description">Receive a complete, organized, and submission-ready IND package that meets all FDA requirements and formatting standards.</p>
                        <div class="step-features">
                            <div class="step-feature">
                                <div class="step-feature-icon">
                                    <i class="fas fa-file-export"></i>
                                </div>
                                <h4 class="step-feature-title">eCTD Formatting</h4>
                                <p class="step-feature-description">Automatically organizes documents in the required eCTD structure with proper bookmarking and hyperlinks.</p>
                            </div>
                            <div class="step-feature">
                                <div class="step-feature-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <h4 class="step-feature-title">Secure Submission</h4>
                                <p class="step-feature-description">Optional direct submission to FDA gateway with tracking and confirmation.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="faq-section" id="faq">
        <div class="container">
            <h2 class="section-title">Frequently Asked Questions</h2>
            <p class="section-description">Common questions about our IND Wizard™ solution</p>
            
            <div class="faq-container">
                <div class="faq-item active">
                    <div class="faq-question">
                        <span>How much time can IND Wizard™ save my team?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Our customers typically report a 65-75% reduction in IND preparation time. What traditionally takes 6-8 months can often be completed in 8-10 weeks with IND Wizard™, allowing you to start clinical trials much sooner and accelerate your drug development timeline.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Do I need regulatory expertise to use IND Wizard™?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>While regulatory expertise is always valuable, IND Wizard™ is designed to guide teams with various levels of regulatory experience. The platform provides context-sensitive help, regulatory guidance, and best practices throughout the process. For organizations with limited regulatory resources, IND Wizard™ can significantly reduce the learning curve and need for extensive regulatory affairs staffing.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>What types of INDs does the platform support?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>IND Wizard™ supports all IND types, including commercial INDs, research INDs, emergency use INDs, and expanded access INDs. The platform supports small molecules, biologics, cell therapies, gene therapies, and combination products. The questionnaire and document generation features adapt based on your specific product type and development stage.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>How is the platform kept up-to-date with FDA requirements?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Our regulatory intelligence team continuously monitors FDA guidances, regulations, and feedback. Updates are implemented into the platform within 72 hours of publication. Additionally, our AI system analyzes patterns in FDA responses to recent submissions, allowing us to incorporate emerging expectations even before they become formal guidance.</p>
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">
                        <span>Can IND Wizard™ integrate with our existing systems?</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="faq-answer">
                        <p>Yes. IND Wizard™ offers robust API capabilities and pre-built integrations with common document management systems (Veeva, Documentum), CTMS platforms, and data repositories. Our implementation team can customize integrations to fit your specific tech stack, ensuring seamless data flow and eliminating duplicate data entry.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- IND Wizard Application Interface -->
    <section class="section bg-light-blue" id="ind-app">
        <div class="container">
            <h2 class="section-title">IND Submission Wizard</h2>
            <p class="section-description">Complete your IND application efficiently and accurately with our guided wizard</p>
            
            <div class="app-container">
                <!-- Tabs for wizard navigation -->
                <div class="wizard-tabs">
                    <div class="tab active" data-tab="project">
                        <div class="tab-number">1</div>
                        <span>Project Details</span>
                    </div>
                    <div class="tab" data-tab="forms">
                        <div class="tab-number">2</div>
                        <span>Required Forms</span>
                    </div>
                    <div class="tab" data-tab="docs">
                        <div class="tab-number">3</div>
                        <span>Supporting Documents</span>
                    </div>
                    <div class="tab" data-tab="sequence">
                        <div class="tab-number">4</div>
                        <span>Final Submission</span>
                    </div>
                </div>
                
                <!-- Tab Content -->
                <div class="wizard-content">
                    <!-- Project Details Tab Content -->
                    <div class="tab-content active" id="project-content">
                        <form id="project-form" class="ind-form">
                            <div class="form-header">
                                <h3>Project Information</h3>
                                <p>Enter the core details about your IND submission project</p>
                            </div>
                            
                            <div class="form-group">
                                <label for="project_id">Project ID</label>
                                <input type="text" id="project_id" name="project_id" class="form-control" placeholder="e.g., IND-2025-001" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="sponsor">Sponsor Name</label>
                                <input type="text" id="sponsor" name="sponsor" class="form-control" placeholder="Company or Sponsor Name" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="drug_name">Drug Name</label>
                                <input type="text" id="drug_name" name="drug_name" class="form-control" placeholder="Investigational Drug Name" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="protocol">Protocol Number</label>
                                <input type="text" id="protocol" name="protocol" class="form-control" placeholder="e.g., ABC-123-2025" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="pi_name">Principal Investigator</label>
                                <input type="text" id="pi_name" name="pi_name" class="form-control" placeholder="Principal Investigator Name" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="pi_address">Principal Investigator Address</label>
                                <textarea id="pi_address" name="pi_address" class="form-control" placeholder="Enter complete address" required></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label for="nct_number">NCT Number (if available)</label>
                                <input type="text" id="nct_number" name="nct_number" class="form-control" placeholder="e.g., NCT0123456789">
                            </div>
                            
                            <div class="form-group">
                                <label for="ind_number">IND Number (if existing)</label>
                                <input type="text" id="ind_number" name="ind_number" class="form-control" placeholder="e.g., 123456">
                            </div>
                            
                            <div class="form-buttons">
                                <button type="button" id="save-project" class="btn btn-primary">Save Project</button>
                                <button type="button" id="next-to-forms" class="btn btn-outline-primary">Next: Forms</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Required Forms Tab Content -->
                    <div class="tab-content" id="forms-content">
                        <div class="forms-container">
                            <div class="form-header">
                                <h3>Required FDA Forms</h3>
                                <p>Generate and download official FDA forms pre-filled with your project information</p>
                            </div>
                            
                            <div class="form-card">
                                <div class="form-card-header">
                                    <h4>Form FDA 1571</h4>
                                    <span class="badge badge-required">Required</span>
                                </div>
                                <div class="form-card-body">
                                    <p>Investigational New Drug Application (IND) - the main application form</p>
                                    <a href="#" id="generate-1571" class="btn btn-secondary">Generate Form 1571</a>
                                </div>
                            </div>
                            
                            <div class="form-card">
                                <div class="form-card-header">
                                    <h4>Form FDA 1572</h4>
                                    <span class="badge badge-required">Required</span>
                                </div>
                                <div class="form-card-body">
                                    <p>Statement of Investigator - to be completed by each clinical investigator</p>
                                    <a href="#" id="generate-1572" class="btn btn-secondary">Generate Form 1572</a>
                                </div>
                            </div>
                            
                            <div class="form-card">
                                <div class="form-card-header">
                                    <h4>Form FDA 3674</h4>
                                    <span class="badge badge-required">Required</span>
                                </div>
                                <div class="form-card-body">
                                    <p>Certification of Compliance with ClinicalTrials.gov Requirements</p>
                                    <a href="#" id="generate-3674" class="btn btn-secondary">Generate Form 3674</a>
                                </div>
                            </div>
                            
                            <div class="form-buttons">
                                <button type="button" id="back-to-project" class="btn btn-outline-primary">Back</button>
                                <button type="button" id="next-to-docs" class="btn btn-primary">Next: Supporting Documents</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Supporting Documents Tab Content -->
                    <div class="tab-content" id="docs-content">
                        <div class="docs-container">
                            <div class="form-header">
                                <h3>Supporting Documents</h3>
                                <p>Generate and manage key documents for your IND submission</p>
                            </div>
                            
                            <div class="documents-grid">
                                <div class="document-card">
                                    <div class="document-icon">
                                        <i class="fas fa-file-medical"></i>
                                    </div>
                                    <h4>Investigator's Brochure</h4>
                                    <p>Comprehensive document describing the investigational drug</p>
                                    <div class="document-actions">
                                        <button class="btn btn-sm btn-outline-primary">Upload</button>
                                        <button class="btn btn-sm btn-outline-secondary">Template</button>
                                    </div>
                                </div>
                                
                                <div class="document-card">
                                    <div class="document-icon">
                                        <i class="fas fa-clipboard-list"></i>
                                    </div>
                                    <h4>Clinical Protocol</h4>
                                    <p>Detailed plan for the clinical trial</p>
                                    <div class="document-actions">
                                        <button class="btn btn-sm btn-outline-primary">Upload</button>
                                        <button class="btn btn-sm btn-outline-secondary">Template</button>
                                    </div>
                                </div>
                                
                                <div class="document-card">
                                    <div class="document-icon">
                                        <i class="fas fa-flask"></i>
                                    </div>
                                    <h4>CMC Information</h4>
                                    <p>Chemistry, Manufacturing, and Controls data</p>
                                    <div class="document-actions">
                                        <button class="btn btn-sm btn-outline-primary">Upload</button>
                                        <button class="btn btn-sm btn-outline-secondary">Generate</button>
                                    </div>
                                </div>
                                
                                <div class="document-card">
                                    <div class="document-icon">
                                        <i class="fas fa-biohazard"></i>
                                    </div>
                                    <h4>Pharmacology/Toxicology</h4>
                                    <p>Preclinical testing data and reports</p>
                                    <div class="document-actions">
                                        <button class="btn btn-sm btn-outline-primary">Upload</button>
                                        <button class="btn btn-sm btn-outline-secondary">AI Analysis</button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-buttons">
                                <button type="button" id="back-to-forms" class="btn btn-outline-primary">Back</button>
                                <button type="button" id="next-to-sequence" class="btn btn-primary">Next: Final Submission</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Final Submission Tab Content -->
                    <div class="tab-content" id="sequence-content">
                        <div class="submission-container">
                            <div class="form-header">
                                <h3>Final Submission</h3>
                                <p>Review your submission package and generate a sequence number</p>
                            </div>
                            
                            <div class="submission-checklist">
                                <h4>Submission Checklist</h4>
                                
                                <div class="checklist-item complete">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Project information complete</span>
                                </div>
                                
                                <div class="checklist-item">
                                    <i class="fas fa-circle"></i>
                                    <span>Form FDA 1571 generated</span>
                                </div>
                                
                                <div class="checklist-item">
                                    <i class="fas fa-circle"></i>
                                    <span>Form FDA 1572 generated</span>
                                </div>
                                
                                <div class="checklist-item">
                                    <i class="fas fa-circle"></i>
                                    <span>Form FDA 3674 generated</span>
                                </div>
                                
                                <div class="checklist-item">
                                    <i class="fas fa-circle"></i>
                                    <span>Supporting documents attached</span>
                                </div>
                                
                                <div class="checklist-item">
                                    <i class="fas fa-circle"></i>
                                    <span>Quality control check complete</span>
                                </div>
                            </div>
                            
                            <div class="submission-actions">
                                <div class="sequence-generator">
                                    <h4>Generate Sequence Number</h4>
                                    <p>Current sequence: <span id="sequence-display">0000</span></p>
                                    <button id="generate-sequence" class="btn btn-primary">Generate New Sequence</button>
                                </div>
                                
                                <div class="export-options">
                                    <h4>Export Options</h4>
                                    <button id="export-ectd" class="btn btn-secondary">
                                        <i class="fas fa-file-export"></i> Export as eCTD
                                    </button>
                                    <button id="export-pdf" class="btn btn-secondary">
                                        <i class="fas fa-file-pdf"></i> Export as PDF
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-buttons">
                                <button type="button" id="back-to-docs" class="btn btn-outline-primary">Back</button>
                                <button type="button" id="submit-ind" class="btn btn-success">Submit IND Application</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <section class="section" id="ind-wizard-demo">
        <div class="container">
            <h2 class="section-title">IND Wizard™ Demo Interface</h2>
            <p class="section-description">Experience the power of our IND Wizard™ with this interactive demo.</p>
            
            <div class="ind-wizard-interface">
                <div class="ind-tabs">
                    <button class="ind-tab active" data-tab="projects">Projects</button>
                    <button class="ind-tab" data-tab="forms">Form Generation</button>
                    <button class="ind-tab" data-tab="history">Submission History</button>
                </div>
                
                <div class="ind-tab-content" id="projects-tab">
                    <div class="ind-panel">
                        <div class="ind-panel-header">
                            <h3>IND Projects</h3>
                            <div class="ind-header-actions">
                                <button class="btn btn-outline-primary" id="create-demo-btn">
                                    <i class="fas fa-magic"></i> Create Demo Project
                                </button>
                                <button class="btn btn-primary ind-new-project-btn">
                                    <i class="fas fa-plus"></i> New Project
                                </button>
                            </div>
                        </div>
                        <div class="ind-panel-body">
                            <div class="ind-loading" id="projects-loading">
                                <i class="fas fa-spinner fa-spin"></i> Loading projects...
                            </div>
                            <table class="ind-table" id="projects-table">
                                <thead>
                                    <tr>
                                        <th>Project ID</th>
                                        <th>Drug Name</th>
                                        <th>Sponsor</th>
                                        <th>Protocol</th>
                                        <th>PI Name</th>
                                        <th>Created</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="projects-tbody">
                                    <!-- Projects will be loaded here -->
                                </tbody>
                            </table>
                            <div class="ind-empty" id="projects-empty">
                                <i class="fas fa-folder-open"></i>
                                <p>No projects found. Click "New Project" to create your first IND project.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="ind-tab-content" id="forms-tab" style="display: none;">
                    <div class="ind-panel">
                        <div class="ind-panel-header">
                            <h3>Form Generation</h3>
                            <div class="ind-form-project-selector">
                                <label for="form-project-select">Project:</label>
                                <select id="form-project-select">
                                    <option value="">Select a project</option>
                                </select>
                            </div>
                        </div>
                        <div class="ind-panel-body">
                            <div class="ind-loading" id="forms-loading">
                                <i class="fas fa-spinner fa-spin"></i> Loading form options...
                            </div>
                            <div class="ind-forms-grid">
                                <div class="ind-form-card" data-form="1571">
                                    <div class="ind-form-icon">
                                        <i class="fas fa-file-alt"></i>
                                    </div>
                                    <h4>Form FDA 1571</h4>
                                    <p>Investigational New Drug Application</p>
                                    <button class="btn btn-primary ind-generate-form-btn" data-form="1571">
                                        <i class="fas fa-download"></i> Generate
                                    </button>
                                </div>
                                <div class="ind-form-card" data-form="1572">
                                    <div class="ind-form-icon">
                                        <i class="fas fa-file-medical"></i>
                                    </div>
                                    <h4>Form FDA 1572</h4>
                                    <p>Statement of Investigator</p>
                                    <button class="btn btn-primary ind-generate-form-btn" data-form="1572">
                                        <i class="fas fa-download"></i> Generate
                                    </button>
                                </div>
                                <div class="ind-form-card" data-form="3674">
                                    <div class="ind-form-icon">
                                        <i class="fas fa-file-contract"></i>
                                    </div>
                                    <h4>Form FDA 3674</h4>
                                    <p>Certification of Compliance</p>
                                    <button class="btn btn-primary ind-generate-form-btn" data-form="3674">
                                        <i class="fas fa-download"></i> Generate
                                    </button>
                                </div>
                                <div class="ind-form-card" data-form="3454">
                                    <div class="ind-form-icon">
                                        <i class="fas fa-file-signature"></i>
                                    </div>
                                    <h4>Form FDA 3454</h4>
                                    <p>Certification: Financial Interests</p>
                                    <button class="btn btn-primary ind-generate-form-btn" data-form="3454">
                                        <i class="fas fa-download"></i> Generate
                                    </button>
                                </div>
                            </div>
                            <div class="ind-empty" id="forms-empty">
                                <i class="fas fa-file-alt"></i>
                                <p>Please select a project to enable form generation.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="ind-tab-content" id="history-tab" style="display: none;">
                    <div class="ind-panel">
                        <div class="ind-panel-header">
                            <h3>Submission History</h3>
                            <div class="ind-history-project-selector">
                                <label for="history-project-select">Project:</label>
                                <select id="history-project-select">
                                    <option value="">Select a project</option>
                                </select>
                            </div>
                        </div>
                        <div class="ind-panel-body">
                            <div class="ind-loading" id="history-loading">
                                <i class="fas fa-spinner fa-spin"></i> Loading submission history...
                            </div>
                            <div class="ind-timeline" id="submission-timeline">
                                <!-- History data will be loaded here -->
                            </div>
                            <div class="ind-empty" id="history-empty">
                                <i class="fas fa-history"></i>
                                <p>No submission history found for the selected project.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modal for creating a new project -->
            <div class="ind-modal" id="new-project-modal">
                <div class="ind-modal-content">
                    <div class="ind-modal-header">
                        <h3>Create New IND Project</h3>
                        <button class="ind-modal-close">&times;</button>
                    </div>
                    <div class="ind-modal-body">
                        <form id="new-project-form">
                            <div class="ind-form-group">
                                <label for="project-drug-name">Drug Name*</label>
                                <input type="text" id="project-drug-name" required placeholder="e.g., ENZYMAX FORTE">
                            </div>
                            <div class="ind-form-group">
                                <label for="project-sponsor">Sponsor Name*</label>
                                <input type="text" id="project-sponsor" required placeholder="e.g., TrialSage Pharmaceuticals">
                            </div>
                            <div class="ind-form-group">
                                <label for="project-protocol">Protocol Number*</label>
                                <input type="text" id="project-protocol" required placeholder="e.g., TS-ENZ-2025">
                            </div>
                            <div class="ind-form-group">
                                <label for="project-pi-name">Principal Investigator Name*</label>
                                <input type="text" id="project-pi-name" required placeholder="e.g., Dr. Jane Smith">
                            </div>
                            <div class="ind-form-group">
                                <label for="project-pi-address">Principal Investigator Address*</label>
                                <input type="text" id="project-pi-address" required placeholder="e.g., 123 Medical Center, San Francisco, CA 94158">
                            </div>
                            <div class="ind-form-group">
                                <label for="project-nct-number">ClinicalTrials.gov Number (Optional)</label>
                                <input type="text" id="project-nct-number" placeholder="e.g., NCT03456789">
                            </div>
                        </form>
                    </div>
                    <div class="ind-modal-footer">
                        <button class="btn btn-outline-primary ind-modal-cancel">Cancel</button>
                        <button class="btn btn-primary" id="create-project-btn">Create Project</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <style>
        /* IND Wizard Interface Styles */
        .ind-wizard-interface {
            background-color: var(--gray-50);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-md);
            margin-bottom: 2rem;
        }
        
        .ind-tabs {
            display: flex;
            background-color: white;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .ind-tab {
            padding: 1rem 1.5rem;
            font-weight: 600;
            border: none;
            background: transparent;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--gray-600);
            border-bottom: 2px solid transparent;
        }
        
        .ind-tab:hover {
            color: var(--primary);
        }
        
        .ind-tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }
        
        .ind-tab-content {
            min-height: 400px;
        }
        
        .ind-panel {
            background-color: white;
        }
        
        .ind-panel-header {
            padding: 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .ind-panel-header h3 {
            margin: 0;
            font-size: 1.25rem;
        }
        
        .ind-header-actions {
            display: flex;
            gap: 0.75rem;
        }
        
        .ind-panel-body {
            padding: 1.5rem;
            position: relative;
            min-height: 300px;
        }
        
        .ind-form-project-selector,
        .ind-history-project-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .ind-form-project-selector select,
        .ind-history-project-selector select {
            padding: 0.5rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--gray-300);
        }
        
        .ind-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .ind-table th,
        .ind-table td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .ind-table th {
            font-weight: 600;
            color: var(--gray-700);
            background-color: var(--gray-50);
        }
        
        .ind-table tr:hover {
            background-color: var(--gray-50);
        }
        
        .ind-loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
            color: var(--gray-600);
            background-color: rgba(255, 255, 255, 0.8);
        }
        
        .ind-loading i {
            margin-right: 0.5rem;
        }
        
        .ind-empty {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 3rem 1rem;
            color: var(--gray-500);
            text-align: center;
        }
        
        .ind-empty i {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        .ind-forms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 1.5rem;
        }
        
        .ind-form-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .ind-form-icon {
            width: 4rem;
            height: 4rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--primary-light);
            color: white;
            border-radius: 50%;
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        
        .ind-form-card h4 {
            margin-bottom: 0.5rem;
            font-size: 1.125rem;
        }
        
        .ind-form-card p {
            margin-bottom: 1.5rem;
            color: var(--gray-600);
            font-size: 0.875rem;
        }
        
        .ind-timeline {
            position: relative;
            padding: 1.5rem 0;
        }
        
        .ind-timeline-item {
            padding-left: 2.5rem;
            position: relative;
            margin-bottom: 2rem;
        }
        
        .ind-timeline-item:last-child {
            margin-bottom: 0;
        }
        
        .ind-timeline-dot {
            position: absolute;
            left: 0;
            top: 0;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background-color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.75rem;
        }
        
        .ind-timeline-connector {
            position: absolute;
            left: 0.75rem;
            top: 1.5rem;
            bottom: -2rem;
            width: 2px;
            background-color: var(--gray-300);
            transform: translateX(-50%);
        }
        
        .ind-timeline-item:last-child .ind-timeline-connector {
            display: none;
        }
        
        .ind-timeline-content {
            background-color: var(--gray-50);
            border-radius: var(--border-radius);
            padding: 1rem;
        }
        
        .ind-timeline-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .ind-timeline-date {
            color: var(--gray-600);
            font-size: 0.875rem;
        }
        
        /* Modal Styles */
        .ind-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1050;
            overflow-y: auto;
            padding: 2rem 1rem;
        }
        
        .ind-modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-xl);
            overflow: hidden;
        }
        
        .ind-modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ind-modal-header h3 {
            margin: 0;
            font-size: 1.25rem;
        }
        
        .ind-modal-close {
            background: transparent;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray-500);
        }
        
        .ind-modal-body {
            padding: 1.5rem;
        }
        
        .ind-modal-footer {
            padding: 1.5rem;
            border-top: 1px solid var(--gray-200);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        
        .ind-form-group {
            margin-bottom: 1.5rem;
        }
        
        .ind-form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .ind-form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            font-size: 1rem;
        }
        
        .ind-form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
        }
    </style>
    
    <section class="cta-section">
        <div class="container">
            <div class="cta-content">
                <span class="cta-badge">14-Day Free Trial</span>
                <h2 class="cta-title">Ready to Transform Your IND Process?</h2>
                <p class="cta-description">Schedule a demo today and see how IND Wizard™ can help your team submit faster with higher quality. Includes a free regulatory assessment worth $5,000.</p>
                <div class="cta-buttons">
                    <a href="/demo" class="btn btn-white">Request Demo</a>
                    <a href="/contact" class="btn btn-outline-white">Contact Sales</a>
                </div>
            </div>
        </div>
    </section>
    
    <script>
        // FAQ accordions
        document.querySelectorAll('.faq-question').forEach(question => {
            question.addEventListener('click', () => {
                const faqItem = question.parentNode;
                const wasActive = faqItem.classList.contains('active');
                
                // Close all items
                document.querySelectorAll('.faq-item').forEach(item => {
                    item.classList.remove('active');
                });
                
                // If it wasn't active, open it
                if (!wasActive) {
                    faqItem.classList.add('active');
                }
            });
        });
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 100,
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // Simple navigation functionality
        document.querySelector('.btn-primary').addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = '/';
        });

        // IND Wizard Interface
        document.addEventListener('DOMContentLoaded', function() {
            // Tab Functionality
            const tabs = document.querySelectorAll('.ind-tab');
            const tabContents = document.querySelectorAll('.ind-tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    
                    // Update active tab
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    // Show selected tab content
                    tabContents.forEach(content => {
                        content.style.display = 'none';
                    });
                    document.getElementById(`${tabName}-tab`).style.display = 'block';
                });
            });
            
            // Modal Functionality
            const newProjectBtn = document.querySelector('.ind-new-project-btn');
            const newProjectModal = document.getElementById('new-project-modal');
            const modalClose = document.querySelector('.ind-modal-close');
            const modalCancel = document.querySelector('.ind-modal-cancel');
            
            function openModal() {
                newProjectModal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
            
            function closeModal() {
                newProjectModal.style.display = 'none';
                document.body.style.overflow = 'auto';
                document.getElementById('new-project-form').reset();
            }
            
            newProjectBtn.addEventListener('click', openModal);
            modalClose.addEventListener('click', closeModal);
            modalCancel.addEventListener('click', closeModal);
            
            // Projects API
            // Demo Project Creation
            const createDemoBtn = document.getElementById('create-demo-btn');
            createDemoBtn.addEventListener('click', async () => {
                try {
                    showToast('Creating demo project...', 'info');
                    const response = await fetch('/api/ind/demo/enzymax');
                    
                    if (!response.ok) {
                        throw new Error('Failed to create demo project');
                    }
                    
                    const data = await response.json();
                    showToast('Demo project created successfully!', 'success');
                    
                    // Refresh the projects list
                    loadProjects();
                } catch (error) {
                    console.error('Error creating demo project:', error);
                    showToast('Error creating demo project', 'error');
                }
            });
            
            function loadProjects() {
                const projectsTable = document.getElementById('projects-table');
                const projectsEmpty = document.getElementById('projects-empty');
                const projectsLoading = document.getElementById('projects-loading');
                const projectsBody = document.getElementById('projects-tbody');
                
                projectsLoading.style.display = 'flex';
                projectsTable.style.display = 'none';
                projectsEmpty.style.display = 'none';
                
                fetch('/api/projects')
                    .then(response => response.json())
                    .then(projects => {
                        projectsLoading.style.display = 'none';
                        
                        if (projects.length === 0) {
                            projectsEmpty.style.display = 'flex';
                            return;
                        }
                        
                        projectsTable.style.display = 'table';
                        
                        // Clear existing rows
                        projectsBody.innerHTML = '';
                        
                        // Update project dropdowns
                        updateProjectDropdowns(projects);
                        
                        // Populate table
                        projects.forEach(project => {
                            const tr = document.createElement('tr');
                            tr.innerHTML = `
                                <td>${project.project_id}</td>
                                <td>${project.drug_name}</td>
                                <td>${project.sponsor}</td>
                                <td>${project.protocol}</td>
                                <td>${project.pi_name}</td>
                                <td>${project.created}</td>
                                <td>
                                    <button class="btn btn-sm btn-primary view-project" data-id="${project.project_id}">
                                        View
                                    </button>
                                    <button class="btn btn-sm btn-outline-primary generate-sequence" data-id="${project.project_id}">
                                        Generate Sequence
                                    </button>
                                </td>
                            `;
                            projectsBody.appendChild(tr);
                        });
                        
                        // Add event listeners to buttons
                        document.querySelectorAll('.view-project').forEach(btn => {
                            btn.addEventListener('click', (e) => {
                                const projectId = e.target.dataset.id;
                                // Switch to forms tab
                                document.querySelector('.ind-tab[data-tab="forms"]').click();
                                // Select the project
                                document.getElementById('form-project-select').value = projectId;
                                // Trigger change event
                                const event = new Event('change');
                                document.getElementById('form-project-select').dispatchEvent(event);
                            });
                        });
                        
                        document.querySelectorAll('.generate-sequence').forEach(btn => {
                            btn.addEventListener('click', (e) => {
                                const projectId = e.target.dataset.id;
                                generateSequence(projectId);
                            });
                        });
                    })
                    .catch(error => {
                        console.error('Error loading projects:', error);
                        projectsLoading.style.display = 'none';
                        projectsEmpty.style.display = 'flex';
                        projectsEmpty.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Failed to load projects. Please try again later.</p>
                        `;
                    });
            }
            
            function updateProjectDropdowns(projects) {
                const formProjectSelect = document.getElementById('form-project-select');
                const historyProjectSelect = document.getElementById('history-project-select');
                
                // Save current selections
                const formCurrentValue = formProjectSelect.value;
                const historyCurrentValue = historyProjectSelect.value;
                
                // Clear options except first one
                formProjectSelect.innerHTML = '<option value="">Select a project</option>';
                historyProjectSelect.innerHTML = '<option value="">Select a project</option>';
                
                // Add project options
                projects.forEach(project => {
                    const option = document.createElement('option');
                    option.value = project.project_id;
                    option.textContent = `${project.drug_name} (${project.project_id})`;
                    
                    formProjectSelect.appendChild(option.cloneNode(true));
                    historyProjectSelect.appendChild(option);
                });
                
                // Restore selections if they still exist
                if (formCurrentValue) {
                    formProjectSelect.value = formCurrentValue;
                }
                
                if (historyCurrentValue) {
                    historyProjectSelect.value = historyCurrentValue;
                }
            }
            
            function createProject() {
                const form = document.getElementById('new-project-form');
                const createBtn = document.getElementById('create-project-btn');
                
                // Basic validation
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const projectData = {
                    drug_name: document.getElementById('project-drug-name').value,
                    sponsor: document.getElementById('project-sponsor').value,
                    protocol: document.getElementById('project-protocol').value,
                    pi_name: document.getElementById('project-pi-name').value,
                    pi_address: document.getElementById('project-pi-address').value,
                    nct_number: document.getElementById('project-nct-number').value || null
                };
                
                createBtn.disabled = true;
                createBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Creating...';
                
                fetch('/api/projects', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(projectData)
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Failed to create project');
                        }
                        return response.json();
                    })
                    .then(project => {
                        // Close modal and reload projects
                        closeModal();
                        loadProjects();
                        
                        // Show success message
                        alert(`Project ${project.project_id} created successfully!`);
                    })
                    .catch(error => {
                        console.error('Error creating project:', error);
                        alert('Failed to create project. Please try again.');
                    })
                    .finally(() => {
                        createBtn.disabled = false;
                        createBtn.innerHTML = 'Create Project';
                    });
            }
            
            function generateSequence(projectId) {
                if (!projectId) return;
                
                fetch(`/api/ind/${projectId}/sequence`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({})
                })
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Failed to generate sequence');
                        }
                        return response.json();
                    })
                    .then(data => {
                        alert(`Sequence ${data.serial_number} generated successfully!`);
                        // Reload projects to show updated sequence number
                        loadProjects();
                        // Load history for this project
                        loadProjectHistory(projectId);
                    })
                    .catch(error => {
                        console.error('Error generating sequence:', error);
                        alert('Failed to generate sequence. Please try again.');
                    });
            }
            
            function loadProjectHistory(projectId) {
                if (!projectId) {
                    document.getElementById('history-empty').style.display = 'flex';
                    document.getElementById('submission-timeline').innerHTML = '';
                    return;
                }
                
                const historyLoading = document.getElementById('history-loading');
                const historyEmpty = document.getElementById('history-empty');
                const timelineEl = document.getElementById('submission-timeline');
                
                historyLoading.style.display = 'flex';
                historyEmpty.style.display = 'none';
                timelineEl.innerHTML = '';
                
                fetch(`/api/ind/${projectId}/history`)
                    .then(response => response.json())
                    .then(history => {
                        historyLoading.style.display = 'none';
                        
                        if (!history || history.length === 0) {
                            historyEmpty.style.display = 'flex';
                            return;
                        }
                        
                        // Create timeline items
                        history.forEach((item, index) => {
                            const formattedDate = new Date(item.timestamp).toLocaleString();
                            
                            const timelineItem = document.createElement('div');
                            timelineItem.className = 'ind-timeline-item';
                            
                            timelineItem.innerHTML = `
                                <div class="ind-timeline-dot">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="ind-timeline-connector"></div>
                                <div class="ind-timeline-content">
                                    <div class="ind-timeline-title">
                                        ${getActivityTypeLabel(item.type)} - Serial #${item.serial}
                                    </div>
                                    <div class="ind-timeline-date">${formattedDate}</div>
                                </div>
                            `;
                            
                            timelineEl.appendChild(timelineItem);
                        });
                    })
                    .catch(error => {
                        console.error('Error loading history:', error);
                        historyLoading.style.display = 'none';
                        historyEmpty.style.display = 'flex';
                        historyEmpty.innerHTML = `
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Failed to load submission history. Please try again later.</p>
                        `;
                    });
            }
            
            function getActivityTypeLabel(type) {
                const labels = {
                    'creation': 'Project Created',
                    'update': 'Project Updated',
                    'form_generation': 'Form Generated',
                    'submission': 'IND Submitted'
                };
                
                return labels[type] || type;
            }
            
            function generateForm(projectId, formType) {
                if (!projectId || !formType) {
                    alert('Please select a project first.');
                    return;
                }
                
                // Create a hidden form to submit the request
                const form = document.createElement('form');
                form.method = 'GET';
                form.action = `/api/ind/${projectId}/forms/${formType}`;
                form.target = '_blank';
                document.body.appendChild(form);
                form.submit();
                document.body.removeChild(form);
            }
            
            // Add event listeners
            document.getElementById('create-project-btn').addEventListener('click', createProject);
            
            // Form generation
            async function generateForm(projectId, formType) {
                if (!projectId || !formType) {
                    showToast('Please select a project first', 'error');
                    return;
                }
                
                const button = document.querySelector(`.ind-generate-form-btn[data-form="${formType}"]`);
                const originalText = button.innerHTML;
                button.disabled = true;
                button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating...';
                
                try {
                    // First, check if the backend service is available
                    const checkResponse = await fetch(`${apiBaseUrl}/api/health`).catch(() => null);
                    const backendAvailable = checkResponse && checkResponse.ok;
                    
                    if (backendAvailable) {
                        // Create a direct download link to the FastAPI endpoint
                        const downloadUrl = `/api/ind/${projectId}/forms/${formType}`;
                        
                        // Create a hidden link element to trigger the download
                        const downloadLink = document.createElement('a');
                        downloadLink.href = downloadUrl;
                        downloadLink.download = `Form_FDA_${formType}_${projectId}.txt`;
                        downloadLink.style.display = 'none';
                        document.body.appendChild(downloadLink);
                        
                        // Trigger the download
                        downloadLink.click();
                        
                        // Clean up the download link
                        setTimeout(() => {
                            document.body.removeChild(downloadLink);
                        }, 500);
                        
                        // Show success message
                        showToast(`Form FDA ${formType} generated successfully!`, 'success');
                    } else {
                        // Generate a mock form for demo purposes if backend is unavailable
                        const mockFormContent = generateMockFormContent(formType, projectId);
                        
                        // Create a blob and download it
                        const blob = new Blob([mockFormContent], { type: 'text/plain' });
                        const blobUrl = URL.createObjectURL(blob);
                        
                        const downloadLink = document.createElement('a');
                        downloadLink.href = blobUrl;
                        downloadLink.download = `Form_FDA_${formType}_${projectId}.txt`;
                        downloadLink.style.display = 'none';
                        document.body.appendChild(downloadLink);
                        
                        // Trigger the download
                        downloadLink.click();
                        
                        // Clean up the download link and blob URL
                        setTimeout(() => {
                            document.body.removeChild(downloadLink);
                            URL.revokeObjectURL(blobUrl);
                        }, 500);
                        
                        // Show demo mode message
                        showToast(`Form FDA ${formType} generated in Demo Mode`, 'info');
                    }
                    
                    // Refresh history for this project
                    loadProjectHistory(projectId);
                } catch (error) {
                    console.error('Error generating form:', error);
                    showToast(`Error generating form: ${error.message}`, 'error');
                } finally {
                    // Reset button state
                    button.disabled = false;
                    button.innerHTML = originalText;
                }
            }
            
            // Generate mock form content for demo purposes
            function generateMockFormContent(formType, projectId) {
                const project = projectList.find(p => p.project_id === projectId) || {
                    drug_name: 'ENZYMAX FORTE',
                    sponsor: 'TrialSage Pharmaceuticals',
                    protocol: 'TS-ENZ-2025',
                    pi_name: 'Dr. Jane Smith',
                    pi_address: '123 Medical Center, San Francisco, CA 94158'
                };
                
                const currentDate = new Date().toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                let content = '';
                
                switch (formType) {
                    case '1571':
                        content = `
DEPARTMENT OF HEALTH AND HUMAN SERVICES
FOOD AND DRUG ADMINISTRATION
INVESTIGATIONAL NEW DRUG APPLICATION (IND)
FORM FDA 1571

1. NAME OF SPONSOR:
   ${project.sponsor}

2. DATE OF SUBMISSION:
   ${currentDate}

3. NAME OF INVESTIGATIONAL DRUG:
   ${project.drug_name}

4. PHASE(S) OF CLINICAL INVESTIGATION TO BE CONDUCTED:
   ☒ Phase 1    ☒ Phase 2    ☐ Phase 3    ☐ Phase 4

5. IDENTIFICATION NUMBER(S) PREVIOUSLY ASSIGNED TO THIS IND:
   First submission

6. IND SUBMISSION TYPE:
   ☒ Initial    ☐ Amendment    ☐ Safety Report    ☐ Annual Report

7. SERIAL NUMBER:
   001

8. THIS SUBMISSION CONTAINS THE FOLLOWING:
   ☒ Protocol          ☒ Information Amendment          ☐ Chemistry/Microbiology
   ☒ Safety Report     ☒ Annual Report                  ☐ Pharmacy
   ☒ Clinical         ☒ Response to FDA Request         ☐ Other

9. NAME AND TITLE OF THE PERSON RESPONSIBLE:
   ${project.pi_name}
   Principal Investigator

10. ADDRESS:
    ${project.pi_address}

11. TELEPHONE NUMBER:
    555-123-4567

12. SUBMISSION CERTIFICATION:
    I agree not to begin clinical investigations until 30 days after FDA's receipt of the IND unless I receive earlier notification by FDA that the studies may begin. I also agree not to begin or continue clinical investigations covered by the IND if those studies are placed on clinical hold.

    ${project.pi_name}
    Principal Investigator
    ${currentDate}
`;
                        break;
                    case '1572':
                        content = `
DEPARTMENT OF HEALTH AND HUMAN SERVICES
FOOD AND DRUG ADMINISTRATION
STATEMENT OF INVESTIGATOR
FORM FDA 1572

1. NAME AND ADDRESS OF INVESTIGATOR:
   ${project.pi_name}
   ${project.pi_address}

2. EDUCATION, TRAINING, AND EXPERIENCE THAT QUALIFIES THE INVESTIGATOR:
   M.D., PhD in Pharmaceutical Sciences
   Board Certification in Internal Medicine
   15+ years of clinical research experience

3. NAME AND ADDRESS OF ANY MEDICAL SCHOOL, HOSPITAL, OR RESEARCH FACILITY:
   University Medical Center
   456 Research Avenue
   San Francisco, CA 94158

4. NAME AND ADDRESS OF CLINICAL LABORATORY FACILITIES:
   Central Clinical Testing Labs
   789 Diagnostic Drive
   San Francisco, CA 94158

5. NAME AND ADDRESS OF THE INSTITUTIONAL REVIEW BOARD (IRB):
   University Medical Center IRB
   456 Research Avenue, Suite 300
   San Francisco, CA 94158

6. NAMES OF SUBINVESTIGATORS:
   Dr. Robert Johnson, MD
   Dr. Sarah Chen, PhD

7. NAME AND CODE NUMBER OF PROTOCOL(S) IN THE IND:
   ${project.protocol}

8. COMMITMENT:
   I agree to conduct the study(ies) in accordance with the relevant, current protocol(s) and will only make changes after notifying the sponsor.
   I agree to personally conduct or supervise the study(ies).
   I agree to inform any patients or any persons used as controls that the drugs are being used for investigational purposes.
   I agree to report to the sponsor adverse experiences that occur in the course of the investigation(s).
   I agree to ensure that all associates, colleagues, and employees assisting in the conduct of the study(ies) are informed about their obligations.
   I agree to maintain adequate and accurate records in accordance with 21 CFR 312.62 and to make those records available for inspection.
   I will ensure that an IRB that complies with the requirements of 21 CFR Part 56 will be responsible for the initial and continuing review and approval of the clinical investigation.
   I agree to promptly report to the IRB all changes in the research activity and all unanticipated problems.
   I will not make any changes in the research without IRB approval, except where necessary to eliminate apparent immediate hazards to human subjects.
   I agree to comply with all other requirements regarding the obligations of clinical investigators and all other pertinent requirements in 21 CFR Part 312.

   ${project.pi_name}
   Principal Investigator
   ${currentDate}
`;
                        break;
                    case '3674':
                        content = `
DEPARTMENT OF HEALTH AND HUMAN SERVICES
FOOD AND DRUG ADMINISTRATION
CERTIFICATION OF COMPLIANCE WITH CLINICALTRIALS.GOV REQUIREMENTS
FORM FDA 3674

1. NAME OF SPONSOR:
   ${project.sponsor}

2. INVESTIGATIONAL DRUG NAME:
   ${project.drug_name}

3. PROTOCOL NUMBER:
   ${project.protocol}

4. APPLICATION NUMBER/TYPE:
   IND Application

5. CERTIFICATION STATEMENT:
   I certify that the requirements of 42 U.S.C. § 282(j), Section 402(j) of the Public Health Service Act, enacted by Title VIII of Public Law 110-85, have been met for the referenced trial.

6. APPLICABLE CLINICAL TRIALS:
   ☒ This submission does not refer to a clinical trial.
   ☐ This submission refers to a clinical trial that is not an applicable clinical trial.
   ☐ This submission refers to one or more applicable clinical trials.

7. CERTIFICATION (Check one):
   ☐ The requirements have been met by providing the clinical trial information to the clinical trial registry databank.
   ☐ The requirements do not apply to any referenced clinical trials.
   ☒ The submission refers to one or more applicable clinical trials that have not been registered.

CERTIFICATION OF COMPLIANCE:
Under 21 CFR 54.4, I certify that all clinical investigators who will participate in this study have provided financial information to the sponsor.
   
   ${project.pi_name}
   Principal Investigator
   ${currentDate}
`;
                        break;
                    case '3454':
                        content = `
DEPARTMENT OF HEALTH AND HUMAN SERVICES
FOOD AND DRUG ADMINISTRATION
CERTIFICATION: FINANCIAL INTERESTS AND ARRANGEMENTS OF CLINICAL INVESTIGATORS
FORM FDA 3454

1. APPLICATION/SUBMISSION NUMBER:
   IND for ${project.drug_name}

2. PROTOCOL NUMBER:
   ${project.protocol}

3. NAME OF CLINICAL INVESTIGATOR:
   ${project.pi_name}

4. CERTIFICATION:
   I hereby certify that I have not entered into any financial arrangement with the clinical investigator(s) conducting the study whereby the value of compensation to the investigator could be affected by the outcome of the study.

5. FINANCIAL INTERESTS/ARRANGEMENTS DISCLOSURE:
   ☒ I hereby certify that no clinical investigator has disclosed any proprietary interest in this product or significant equity in the sponsor.
   ☐ I hereby certify that the following financial arrangements exist:
      (None specified)

6. STEPS TAKEN TO MINIMIZE BIAS:
   The clinical study has been designed with appropriate blinding procedures and objective endpoints to minimize potential bias.

7. INVESTIGATOR CERTIFICATIONS:
   ☒ I certify that all investigators have completed financial disclosure forms.
   ☒ I certify that all disclosed arrangements have been reviewed to determine potential bias.
   ☒ I certify that this product development was conducted with appropriate ethical oversight.

   ${project.sponsor}
   Sponsor Representative
   ${currentDate}
`;
                        break;
                    default:
                        content = `Demo Form FDA ${formType} for ${project.drug_name}\nGenerated on ${currentDate}\n\nThis is a placeholder form for demonstration purposes only.`;
                }
                
                return content;
            }
            
            // Form generation buttons
            document.querySelectorAll('.ind-generate-form-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // Get the form type from the button's data attribute
                    const formType = e.currentTarget.dataset.form;
                    // Get the selected project ID
                    const projectId = document.getElementById('form-project-select').value;
                    // Generate the form
                    generateForm(projectId, formType);
                });
            });
            
            // Project select change events
            document.getElementById('form-project-select').addEventListener('change', (e) => {
                const projectId = e.target.value;
                const formsGrid = document.querySelector('.ind-forms-grid');
                const formsEmpty = document.getElementById('forms-empty');
                
                if (projectId) {
                    formsGrid.style.display = 'grid';
                    formsEmpty.style.display = 'none';
                } else {
                    formsGrid.style.display = 'none';
                    formsEmpty.style.display = 'flex';
                }
            });
            
            document.getElementById('history-project-select').addEventListener('change', (e) => {
                const projectId = e.target.value;
                loadProjectHistory(projectId);
            });
            
            // Initial load
            loadProjects();
                const tabs = document.querySelectorAll('.wizard-tabs .tab');
                tabs.forEach(tab => {
                    tab.addEventListener('click', function() {
                        const tabName = this.getAttribute('data-tab');
                        activateTab(tabName);
                    });
                });
                
                document.getElementById('next-to-forms')?.addEventListener('click', function() {
                    activateTab('forms');
                });
                
                document.getElementById('back-to-project')?.addEventListener('click', function() {
                    activateTab('project');
                });
                
                document.getElementById('next-to-docs')?.addEventListener('click', function() {
                    activateTab('docs');
                });
                
                document.getElementById('back-to-forms')?.addEventListener('click', function() {
                    activateTab('forms');
                });
                
                document.getElementById('next-to-sequence')?.addEventListener('click', function() {
                    activateTab('sequence');
                });
                
                document.getElementById('back-to-docs')?.addEventListener('click', function() {
                    activateTab('docs');
                });
            }
            
            // Fetch projects from API
            async function fetchProjects() {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/projects`);
                    if (response.ok) {
                        projectList = await response.json();
                        populateProjectSelect();
                    } else {
                        console.error('Failed to fetch projects:', await response.text());
                    }
                } catch (error) {
                    console.error('Error fetching projects:', error);
                    // Mock data for development if API is unavailable
                    projectList = [
                        {
                            project_id: "DEMO-2025-001",
                            sponsor: "TrialSage Pharma",
                            drug_name: "ENZYMAX FORTE",
                            protocol: "TS-ENZ-2025",
                            pi_name: "Dr. Jane Smith",
                            pi_address: "123 Medical Center, San Francisco, CA 94158",
                            serial_number: 4
                        }
                    ];
                    populateProjectSelect();
                }
            }
            
            // Populate project select dropdown
            function populateProjectSelect() {
                if (!projectSelect) return;
                
                projectSelect.innerHTML = '<option value="">Select a project</option>';
                
                projectList.forEach(project => {
                    const option = document.createElement('option');
                    option.value = project.project_id;
                    option.textContent = `${project.drug_name} (${project.project_id})`;
                    projectSelect.appendChild(option);
                });
                
                projectSelect.addEventListener('change', function() {
                    const selectedId = this.value;
                    if (selectedId) {
                        loadProject(selectedId);
                    }
                });
            }
            
            // Load a project by ID
            async function loadProject(projectId) {
                try {
                    const response = await fetch(`${apiBaseUrl}/api/projects/${projectId}`);
                    if (response.ok) {
                        currentProject = await response.json();
                        populateProjectForm();
                        updateSequenceDisplay();
                        updateChecklistStatus();
                    } else {
                        console.error('Failed to load project:', await response.text());
                    }
                } catch (error) {
                    console.error('Error loading project:', error);
                    // Find project in local list if API fails
                    currentProject = projectList.find(p => p.project_id === projectId);
                    if (currentProject) {
                        populateProjectForm();
                        updateSequenceDisplay();
                        updateChecklistStatus();
                    }
                }
            }
            
            // Populate the project form with current project data
            function populateProjectForm() {
                if (!currentProject || !projectForm) return;
                
                for (const field in currentProject) {
                    const input = document.getElementById(field);
                    if (input) {
                        input.value = currentProject[field] || '';
                    }
                }
            }
            
            // Save a project
            async function saveProject() {
                if (!projectForm) return;
                
                const formData = new FormData(projectForm);
                const projectData = {};
                
                formData.forEach((value, key) => {
                    projectData[key] = value;
                });
                
                try {
                    let response;
                    const method = currentProject ? 'PUT' : 'POST';
                    const url = currentProject 
                        ? `${apiBaseUrl}/api/projects/${projectData.project_id}`
                        : `${apiBaseUrl}/api/projects`;
                    
                    response = await fetch(url, {
                        method: method,
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(projectData)
                    });
                    
                    if (response.ok) {
                        currentProject = await response.json();
                        showMessage('Project saved successfully!', 'success');
                        updateChecklistStatus();
                        
                        // Update project list
                        fetchProjects();
                    } else {
                        showMessage('Failed to save project. Please try again.', 'error');
                        console.error('Failed to save project:', await response.text());
                    }
                } catch (error) {
                    console.error('Error saving project:', error);
                    
                    // For demo/development if API is unavailable
                    currentProject = { ...projectData, created: new Date().toISOString() };
                    projectList.push(currentProject);
                    showMessage('Project saved successfully! (Demo Mode)', 'success');
                    updateChecklistStatus();
                }
            }
            
            // Generate a form document is now handled in the new implementation above
            
            // Generate a new sequence number
            async function generateSequence() {
                if (!currentProject) {
                    showMessage('Please save a project first.', 'warning');
                    return;
                }
                
                try {
                    const response = await fetch(`${apiBaseUrl}/api/ind/${currentProject.project_id}/sequence`, {
                        method: 'POST'
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        currentProject.serial_number = parseInt(result.serial_number);
                        updateSequenceDisplay();
                        showMessage('New sequence number generated!', 'success');
                    } else {
                        showMessage('Failed to generate sequence number.', 'error');
                        console.error('Failed to generate sequence:', await response.text());
                    }
                } catch (error) {
                    console.error('Error generating sequence:', error);
                    
                    // For demo/development if API is unavailable
                    currentProject.serial_number = (currentProject.serial_number || 0) + 1;
                    updateSequenceDisplay();
                    showMessage('New sequence number generated! (Demo Mode)', 'success');
                }
            }
            
            // Update the sequence number display
            function updateSequenceDisplay() {
                if (sequenceDisplay && currentProject) {
                    const formattedNumber = String(currentProject.serial_number || 0).padStart(4, '0');
                    sequenceDisplay.textContent = formattedNumber;
                }
            }
            
            // Update checklist status based on current project data
            function updateChecklistStatus() {
                if (!currentProject) return;
                
                // Project information item
                const projectInfoItem = document.querySelector('.checklist-item:first-child');
                if (projectInfoItem) {
                    projectInfoItem.classList.add('complete');
                    projectInfoItem.querySelector('i').className = 'fas fa-check-circle';
                }
            }
            
            // Activate a tab
            function activateTab(tabName) {
                // Update tab active states
                document.querySelectorAll('.wizard-tabs .tab').forEach(tab => {
                    if (tab.getAttribute('data-tab') === tabName) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });
                
                // Update content active states
                document.querySelectorAll('.tab-content').forEach(content => {
                    if (content.id === `${tabName}-content`) {
                        content.classList.add('active');
                    } else {
                        content.classList.remove('active');
                    }
                });
            }
            
            // Show a message to the user
            function showMessage(message, type = 'info') {
                showToast(message, type);
            }
            
            // Show toast notification
            function showToast(message, type = 'info') {
                // Create toast container if it doesn't exist
                let toastContainer = document.querySelector('.toast-container');
                if (!toastContainer) {
                    toastContainer = document.createElement('div');
                    toastContainer.className = 'toast-container';
                    document.body.appendChild(toastContainer);
                }
                
                const toastElement = document.createElement('div');
                toastElement.className = `toast toast-${type}`;
                
                let icon = 'info-circle';
                if (type === 'success') icon = 'check-circle';
                if (type === 'error') icon = 'exclamation-circle';
                if (type === 'warning') icon = 'exclamation-triangle';
                
                toastElement.innerHTML = `
                    <div class="toast-icon">
                        <i class="fas fa-${icon}"></i>
                    </div>
                    <div class="toast-content">
                        ${message}
                    </div>
                    <button class="toast-close">
                        <i class="fas fa-times"></i>
                    </button>
                `;
                
                // Add close functionality
                toastElement.querySelector('.toast-close').addEventListener('click', () => {
                    toastElement.classList.add('toast-hiding');
                    setTimeout(() => toastElement.remove(), 300);
                });
                
                toastContainer.appendChild(toastElement);
                
                // Auto remove after 5 seconds
                setTimeout(() => {
                    if (toastElement.parentNode) {
                        toastElement.classList.add('toast-hiding');
                        setTimeout(() => {
                            if (toastElement.parentNode) {
                                toastElement.remove();
                            }
                        }, 300);
                    }
                }, 5000);
            }
            
            // Initialize the application
            initApp();
        });
    </script>
    
    <style>
        /* Toast Notification Styles */
        .toast-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
            z-index: 9999;
        }
        
        .toast {
            display: flex;
            align-items: center;
            min-width: 300px;
            max-width: 450px;
            padding: 12px 15px;
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            margin-bottom: 10px;
            animation: slideIn 0.3s ease;
            border-left: 4px solid var(--primary);
        }
        
        .toast-success {
            border-left-color: var(--success);
        }
        
        .toast-error {
            border-left-color: var(--danger);
        }
        
        .toast-warning {
            border-left-color: #f59e0b;
        }
        
        .toast-icon {
            flex-shrink: 0;
            margin-right: 12px;
            font-size: 1.25rem;
        }
        
        .toast-success .toast-icon {
            color: var(--success);
        }
        
        .toast-error .toast-icon {
            color: var(--danger);
        }
        
        .toast-warning .toast-icon {
            color: #f59e0b;
        }
        
        .toast-content {
            flex-grow: 1;
            font-size: 0.95rem;
            color: var(--gray-800);
        }
        
        .toast-close {
            background: transparent;
            border: none;
            color: var(--gray-500);
            cursor: pointer;
            padding: 0;
            font-size: 0.875rem;
            margin-left: 8px;
        }
        
        .toast-close:hover {
            color: var(--gray-800);
        }
        
        .toast-hiding {
            animation: slideOut 0.3s ease forwards;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        /* Additional styles for the IND Wizard application */
        .bg-light-blue {
            background-color: #f0f7ff;
        }
        
        .app-container {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            margin-top: 2rem;
        }
        
        .wizard-tabs {
            display: flex;
            border-bottom: 1px solid var(--gray-200);
            background-color: var(--gray-50);
        }
        
        .tab {
            padding: 1.25rem 1.5rem;
            display: flex;
            align-items: center;
            cursor: pointer;
            position: relative;
            color: var(--gray-600);
            transition: all 0.2s ease;
            font-weight: 500;
        }
        
        .tab:hover {
            background-color: var(--gray-100);
        }
        
        .tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            background-color: white;
        }
        
        .tab-number {
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            margin-right: 0.75rem;
            background-color: var(--gray-200);
            color: var(--gray-700);
            font-weight: 600;
        }
        
        .tab.active .tab-number {
            background-color: var(--primary);
            color: white;
        }
        
        .wizard-content {
            position: relative;
        }
        
        .tab-content {
            display: none;
            padding: 2rem;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .ind-form {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-header {
            margin-bottom: 2rem;
        }
        
        .form-header h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }
        
        .form-header p {
            color: var(--gray-600);
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--gray-700);
        }
        
        .form-control {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            line-height: 1.5;
            border: 1px solid var(--gray-300);
            border-radius: var(--border-radius);
            transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
        }
        
        .form-control:focus {
            border-color: var(--primary);
            outline: 0;
            box-shadow: 0 0 0 0.2rem rgba(14, 165, 233, 0.25);
        }
        
        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        
        .forms-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-card {
            background-color: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--border-radius);
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        
        .form-card-header {
            padding: 1rem 1.5rem;
            background-color: var(--gray-50);
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .form-card-header h4 {
            margin: 0;
            font-weight: 600;
            color: var(--secondary);
        }
        
        .form-card-body {
            padding: 1.5rem;
        }
        
        .form-card-body p {
            margin-bottom: 1rem;
            color: var(--gray-600);
        }
        
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 9999px;
        }
        
        .badge-required {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }
        
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .document-card {
            background-color: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            text-align: center;
            transition: all 0.2s ease;
        }
        
        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }
        
        .document-icon {
            width: 3.5rem;
            height: 3.5rem;
            background-color: var(--primary-light);
            color: var(--primary-dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
        }
        
        .document-card h4 {
            font-size: 1.125rem;
            margin-bottom: 0.5rem;
            color: var(--secondary);
        }
        
        .document-card p {
            font-size: 0.875rem;
            color: var(--gray-600);
            margin-bottom: 1.5rem;
        }
        
        .document-actions {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
        }
        
        .submission-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .submission-checklist {
            background-color: var(--gray-50);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .submission-checklist h4 {
            margin-bottom: 1.5rem;
            color: var(--secondary);
        }
        
        .checklist-item {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: var(--border-radius);
            background-color: white;
            transition: all 0.2s ease;
        }
        
        .checklist-item:last-child {
            margin-bottom: 0;
        }
        
        .checklist-item i {
            font-size: 1.25rem;
            margin-right: 1rem;
            color: var(--gray-400);
        }
        
        .checklist-item.complete i {
            color: var(--success);
        }
        
        .checklist-item span {
            font-weight: 500;
            color: var(--gray-700);
        }
        
        .checklist-item.complete {
            border-left: 3px solid var(--success);
        }
        
        .submission-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .sequence-generator, .export-options {
            background-color: white;
            border: 1px solid var(--gray-200);
            border-radius: var(--border-radius);
            padding: 1.5rem;
        }
        
        .sequence-generator h4, .export-options h4 {
            margin-bottom: 1rem;
            color: var(--secondary);
        }
        
        .sequence-generator p {
            margin-bottom: 1.5rem;
            font-size: 0.875rem;
            color: var(--gray-600);
        }
        
        #sequence-display {
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--primary);
        }
        
        .export-options button {
            margin-bottom: 0.75rem;
            width: 100%;
        }
        
        .export-options i {
            margin-right: 0.5rem;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .btn-success:hover {
            background-color: var(--accent-dark);
            border-color: var(--accent-dark);
            color: white;
        }
        
        .btn-secondary {
            background-color: var(--gray-200);
            color: var(--gray-800);
            border-color: var(--gray-200);
        }
        
        .btn-secondary:hover {
            background-color: var(--gray-300);
            border-color: var(--gray-300);
        }
        
        .btn-outline-primary {
            background-color: transparent;
            color: var(--primary);
            border-color: var(--primary);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.875rem;
        }
        
        .message-container {
            position: fixed;
            top: 5rem;
            right: 1.5rem;
            z-index: 9999;
            max-width: 350px;
        }
        
        .message {
            padding: 1rem 1.5rem;
            margin-bottom: 1rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-md);
            animation: slide-in 0.3s ease forwards;
        }
        
        .message.success {
            background-color: #dcfce7;
            color: #166534;
            border-left: 4px solid #22c55e;
        }
        
        .message.error {
            background-color: #fee2e2;
            color: #991b1b;
            border-left: 4px solid #ef4444;
        }
        
        .message.warning {
            background-color: #fef3c7;
            color: #92400e;
            border-left: 4px solid #f59e0b;
        }
        
        .message.info {
            background-color: #dbeafe;
            color: #1e40af;
            border-left: 4px solid #3b82f6;
        }
        
        .message.fade-out {
            animation: fade-out 0.5s ease forwards;
        }
        
        @keyframes slide-in {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes fade-out {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }
        
        @media (max-width: 768px) {
            .wizard-tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1 1 40%;
                padding: 1rem;
                text-align: center;
                justify-content: center;
            }
            
            .documents-grid {
                grid-template-columns: 1fr;
            }
            
            .submission-actions {
                grid-template-columns: 1fr;
            }
            
            .tab-content {
                padding: 1.5rem 1rem;
            }
            
            .form-buttons {
                flex-direction: column-reverse;
                gap: 1rem;
            }
            
            .form-buttons button {
                width: 100%;
            }
        }
    </style>
</body>
</html>